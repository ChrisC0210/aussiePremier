window.onscroll=function(){headerFixed()};var header=document.getElementById("header-shadow"),sticky=header.offsetTop;function headerFixed(){window.pageYOffset>sticky?header.classList.add("sticky"):header.classList.remove("sticky")}function searchToggle(){var e=document.getElementById("searchBoxOpen");"none"===e.style.display?e.style.display="block":e.style.display="none"}window.addEventListener("load",()=>{var e=document.getElementsByClassName("needs-validation");for(let t of e)t.addEventListener("submit",e=>{t.checkValidity()?(e.preventDefault(),console.info("All form fields are now valid...")):(e.preventDefault(),e.stopPropagation(),console.log("Bootstrap will handle incomplete form fields")),t.classList.add("was-validated")})});const imagePreview=document.querySelector('[data-target="image-preview"]'),spinner=document.querySelector('[data-target="spinner"]'),fileUploader=document.querySelector('[data-target="file-uploader"]');async function handleFileUpload(e){try{const t=e.target.files[0];if(setUploading(!0),!t)return;const n=await beforeUpload(t);if(!n.isValid)throw n.errorMessages;const a=await getArrayBuffer(t);await uploadFileAJAX(a);alert("File Uploaded Success"),showPreviewImage(t)}catch(e){alert(e),console.log("Catch Error: ",e)}finally{e.target.value="",setUploading(!1)}}function showPreviewImage(e){const t=URL.createObjectURL(e);imagePreview.src=t}function getArrayBuffer(e){return new Promise((t,n)=>{const a=new FileReader;a.addEventListener("load",()=>{t(a.result)}),a.addEventListener("error",()=>{n("error occurred in getArrayBuffer")}),a.readAsArrayBuffer(e)})}function uploadFileAJAX(e){return fetch("https://jsonplaceholder.typicode.com/posts/",{headers:{version:1,"content-type":"application/json"},method:"POST",body:JSON.stringify({imageId:1,icon:Array.from(new Uint8Array(e))})}).then(e=>{if(!e.ok)throw e.statusText;return e.json()}).then(e=>e).catch(e=>console.log("err",e))}function beforeUpload(e){return new Promise(t=>{const n=["image/jpeg","image/png"].includes(e.type);let a=[];n||a.push("You can only upload JPG or PNG file!");const o=e.size/1024/1024<2;o||a.push("Image must smaller than 2MB!"),t({isValid:n&&o,errorMessages:a.join("\n")})})}function setUploading(e){!0===e?spinner.classList.add("opacity-1"):spinner.classList.remove("opacity-1")}function imageIsLoaded(){alert(this.src)}fileUploader.addEventListener("change",handleFileUpload),$(document).ready(function(){$(function(){$("#main-menu").smartmenus({subMenusSubOffsetX:1,subMenusSubOffsetY:-8})}),$(function(){var e=$("#main-menu-state");e.length&&(e.change(function(e){var t=$("#main-menu");this.checked?t.hide().slideDown(250,function(){t.css("display","")}):t.show().slideUp(250,function(){t.css("display","")})}),$(window).bind("beforeunload unload",function(){e[0].checked&&e[0].click()}))}),$("select#qty").change(function(){var e=$(this).children("option:selected").val();$("a.add-to-cart").click(function(t){setTimeout(function(){$("a.cart > span").addClass("counter"),$("a.cart > span.counter").text(e)},400),t.preventDefault()})})});